!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t){function n(e){var t=u(e);return function(n){function o(e,t){return e?void n.call(a,e,t):n.call(a,e,t)}function i(e,t){var n;if(arguments.length>2&&(t=h.call(arguments,1)),e)try{n=s.throw(e)}catch(u){return o(u)}if(!e)try{n=s.next(t)}catch(u){return o(u)}if(n.done)return o(null,n.value);if(n.value=r(n.value,a),"function"!=typeof n.value)i(new TypeError('You may only yield a function, promise, generator, array, or object, but the following was passed: "'+String(n.value)+'"'));else{var c=!1;try{n.value.call(a,function(){c||(c=!0,i.apply(a,arguments))})}catch(u){if(c)return;c=!0,i(u)}}}var a=this,s=e;if(t){var u=h.call(arguments),c=u.length,p=c&&"function"==typeof u[c-1];n=p?u.pop():f,s=e.apply(this,u)}else n=n||f;i()}}function r(e,t){return u(e)?n(e.call(t)):s(e)?n(e):a(e)?i(e):"function"==typeof e?e:c(e)||Array.isArray(e)?o.call(t,e):e}function o(e){var t=this,n=Array.isArray(e);return function(o){function i(e,n){if(!a)try{if(e=r(e,t),"function"!=typeof e)return c[n]=e,--u||o(null,c);e.call(t,function(e,t){if(!a){if(e)return a=!0,o(e);c[n]=t,--u||o(null,c)}})}catch(i){a=!0,o(i)}}var a,s=Object.keys(e),u=s.length,c=n?new Array(u):new e.constructor;if(!u)return void o(null,c);if(!n)for(var f=0;u>f;f++)c[s[f]]=void 0;for(var f=0;f<s.length;f++)i(e[s[f]],s[f])}}function i(e){return function(t){e.then(function(e){t(null,e)},t)}}function a(e){return e&&"function"==typeof e.then}function s(e){return e&&"function"==typeof e.next&&"function"==typeof e.throw}function u(e){return e&&e.constructor&&"GeneratorFunction"==e.constructor.name}function c(e){return e&&Object==e.constructor}function f(e){e&&setImmediate(function(){throw e})}var h=Array.prototype.slice;t.exports=n,t.exports.toThunk=r,t.exports.objectToThunk=o,t.exports.promiseToThunk=i},{}],2:[function(e,t,n){"use strict";function r(e,t){e.annotations===Object.getPrototypeOf(e).annotations&&(e.annotations=[]),e.annotations=e.annotations||[],e.annotations.push(t)}function o(e,t){if(!e.annotations||0===e.annotations.length)return!1;for(var n,r=e.annotations[Symbol.iterator]();!(n=r.next()).done;){var o=n.value;if(o instanceof t)return!0}return!1}function i(e){var t={provide:{token:null,isPromise:!1},params:[]};if(e.annotations&&e.annotations.length)for(var n,r=e.annotations[Symbol.iterator]();!(n=r.next()).done;){var o=n.value;o instanceof h&&o.tokens.forEach(function(e){t.params.push({token:e,isPromise:o.isPromise,isLazy:o.isLazy})}),o instanceof l&&(t.provide.token=o.token,t.provide.isPromise=o.isPromise)}return e.parameters&&e.parameters.forEach(function(e,n){for(var r,o=e[Symbol.iterator]();!(r=o.next()).done;){var i=r.value;u(i)&&!t.params[n]?t.params[n]={token:i,isPromise:!1,isLazy:!1}:i instanceof h&&(t.params[n]={token:i.tokens[0],isPromise:i.isPromise,isLazy:i.isLazy})}}),t}var a=Array.prototype.slice,s=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e.__proto__=t};n.annotate=r,n.hasAnnotation=o,n.readAnnotations=i;var u=e("./util").isFunction,c=function(){};n.SuperConstructor=c;var f=function(){};n.TransientScope=f;var h=function(){var e=a.call(arguments);this.tokens=e,this.isPromise=!1,this.isLazy=!1};n.Inject=h;var p=function(e){var t=function(){var e=a.call(arguments);this.tokens=e,this.isPromise=!0,this.isLazy=!1};return s(t,e),t}(h);n.InjectPromise=p;var d=function(e){var t=function(){var e=a.call(arguments);this.tokens=e,this.isPromise=!1,this.isLazy=!0};return s(t,e),t}(h);n.InjectLazy=d;var l=function(e){this.token=e,this.isPromise=!1};n.Provide=l;var v=function(e){var t=function(e){this.token=e,this.isPromise=!0};return s(t,e),t}(l);n.ProvidePromise=v},{"./util":7}],3:[function(e,t,n){"use strict";n.Injector=e("./injector").Injector,n.annotate=e("./annotations").annotate,n.hasAnnotation=e("./annotations").hasAnnotation,n.readAnnotations=e("./annotations").readAnnotations,n.Inject=e("./annotations").Inject,n.InjectLazy=e("./annotations").InjectLazy,n.InjectPromise=e("./annotations").InjectPromise,n.Provide=e("./annotations").Provide,n.ProvidePromise=e("./annotations").ProvidePromise,n.SuperConstructor=e("./annotations").SuperConstructor,n.TransientScope=e("./annotations").TransientScope},{"./annotations":2,"./injector":4}],4:[function(e,t,n){"use strict";function r(e,t){return arguments.length>1&&e.push(t),e.length>1?" ("+e.map(f).join(" -> ")+")":""}var o=e("./annotations").annotate,i=e("./annotations").readAnnotations,a=e("./annotations").hasAnnotation,s=e("./annotations").Provide,u=e("./annotations").TransientScope,c=e("./util").isFunction,f=e("./util").toString,h=e("./profiler").profileInjector,p=e("./providers").createProviderFromFnOrClass,d=function(){var e=function t(e,n,r,o){void 0===e&&(e=[]),void 0===n&&(n=null),void 0===r&&(r=new Map),void 0===o&&(o=[]),this._cache=new Map,this._providers=r,this._parent=n,this._scopes=o,this._loadModules(e),h(this,t)};return e.prototype._collectProvidersWithAnnotation=function(e,t){this._providers.forEach(function(n,r){!t.has(r)&&a(n.provider,e)&&t.set(r,n)}),this._parent&&this._parent._collectProvidersWithAnnotation(e,t)},e.prototype._loadModules=function(e){for(var t,n=e[Symbol.iterator]();!(t=n.next()).done;){var r=t.value;{if(!c(r))throw new Error("Invalid module!");this._loadFnOrClass(r)}}},e.prototype._loadFnOrClass=function(e){var t=i(e),n=t.provide.token||e,r=p(e,t);this._providers.set(n,r)},e.prototype._hasProviderFor=function(e){return this._providers.has(e)?!0:this._parent?this._parent._hasProviderFor(e):!1},e.prototype._instantiateDefaultProvider=function(e,t,n,r,o){if(!this._parent)return this._providers.set(t,e),this.get(t,n,r,o);for(var i,s=this._scopes[Symbol.iterator]();!(i=s.next()).done;){var u=i.value;if(a(e.provider,u))return this._providers.set(t,e),this.get(t,n,r,o)}return this._parent._instantiateDefaultProvider(e,t,n,r,o)},e.prototype.get=function(t,n,h,d){var l=this;void 0===n&&(n=[]),void 0===h&&(h=!1),void 0===d&&(d=!1);var v,m,w="",g=this;if(null===t||void 0===t)throw w=r(n,t),new Error('Invalid token "'+t+'" requested!'+w);if(t===e)return h?Promise.resolve(this):this;if(d)return function(){var e=g;if(arguments.length){for(var r=[],i=arguments,a=0;a<i.length;a+=2)r.push(function(e){var t=function(){return i[e+1]};return o(t,new s(i[e])),t}(a));e=g.createChild(r)}return e.get(t,n,h,!1)};if(this._cache.has(t)){if(m=this._cache.get(t),v=this._providers.get(t),v.isPromise&&!h)throw w=r(n,t),new Error("Cannot instantiate "+f(t)+" synchronously. It is provided as a promise!"+w);return!v.isPromise&&h?Promise.resolve(m):m}if(v=this._providers.get(t),!v&&c(t)&&!this._hasProviderFor(t))return v=p(t,i(t)),this._instantiateDefaultProvider(v,t,n,h,d);if(!v){if(!this._parent)throw w=r(n,t),new Error("No provider for "+f(t)+"!"+w);return this._parent.get(t,n,h,d)}if(-1!==n.indexOf(t))throw w=r(n,t),new Error("Cannot instantiate cyclic dependency!"+w);n.push(t);var y=h&&v.params.some(function(e){return!e.isPromise}),b=v.params.map(function(e){return y?l.get(e.token,n,!0,e.isLazy):l.get(e.token,n,e.isPromise,e.isLazy)});if(y){var x=n.slice();return n.pop(),Promise.all(b).then(function(e){try{m=v.create(e)}catch(n){w=r(x);var o="ORIGINAL ERROR: "+n.message;throw n.message="Error during instantiation of "+f(t)+"!"+w+"\n"+o,n}return a(v.provider,u)||g._cache.set(t,m),m})}try{m=v.create(b)}catch(R){w=r(n);var k="ORIGINAL ERROR: "+R.message;throw R.message="Error during instantiation of "+f(t)+"!"+w+"\n"+k,R}if(a(v.provider,u)||this._cache.set(t,m),!h&&v.isPromise)throw w=r(n),new Error("Cannot instantiate "+f(t)+" synchronously. It is provided as a promise!"+w);return h&&!v.isPromise&&(m=Promise.resolve(m)),n.pop(),m},e.prototype.getPromise=function(e){return this.get(e,[],!0)},e.prototype.createChild=function(t,n){void 0===t&&(t=[]),void 0===n&&(n=[]);var r=new Map;n.push(u);for(var o,i=n[Symbol.iterator]();!(o=i.next()).done;){var a=o.value;this._collectProvidersWithAnnotation(a,r)}return new e(t,this,r,n)},e}();n.Injector=d},{"./annotations":2,"./profiler":5,"./providers":6,"./util":7}],5:[function(e,t,n){(function(t,r){"use strict";function o(){return++p}function i(e,t){return t.has(e)||t.set(e,o().toString()),t.get(e)}function a(e,t,n){return{id:i(t,n),name:c(t),isPromise:e.isPromise,dependencies:e.params.map(function(e){return{token:i(e.token,n),isPromise:e.isPromise,isLazy:e.isLazy}})}}function s(e,t,n){var r={id:i(e,t),parent_id:e._parent?i(e._parent,t):null,providers:{}},o=i(n,t);return r.providers[o]={id:o,name:c(n),isPromise:!1,dependencies:[]},e._providers.forEach(function(e,n){var o=a(e,n,t);r.providers[o.id]=o}),r}function u(e,t){f&&(h.__di_dump__||(h.__di_dump__={injectors:[],tokens:new Map}),h.__di_dump__.injectors.push(s(e,h.__di_dump__.tokens,t)))}n.profileInjector=u;var c=e("./util").toString,f=!1,h=null;"object"==typeof t&&t.env?(f=!!t.env.DEBUG,h=r):"object"==typeof location&&location.search&&(f=/di_debug/.test(location.search),h=window);var p=0}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":7,_process:8}],6:[function(e,t,n){"use strict";function r(e,t){return a(e)?new h(e,t.params,t.provide.isPromise):new p(e,t.params,t.provide.isPromise)}n.createProviderFromFnOrClass=r;var o=e("./annotations").SuperConstructor,i=e("./annotations").readAnnotations,a=e("./util").isClass,s=e("./util").isFunction,u=e("./util").isObject,c=e("./util").toString,f=Object.getPrototypeOf(Function),h=function(){var e=function(e,t,n){this.provider=e,this.isPromise=n,this.params=[],this._constructors=[],this._flattenParams(e,t),this._constructors.unshift([e,0,this.params.length-1])};return e.prototype._flattenParams=function(e,t){for(var n,r,a,s=t[Symbol.iterator]();!(a=s.next()).done;){var u=a.value;if(u.token===o){if(n=Object.getPrototypeOf(e),n===f)throw new Error(""+c(e)+" does not have a parent constructor. Only classes with a parent can ask for SuperConstructor!");r=[n,this.params.length],this._constructors.push(r),this._flattenParams(n,i(n).params),r.push(this.params.length-1)}else this.params.push(u)}},e.prototype._createConstructor=function(e,t,n){var r,o=this._constructors[e],i=this._constructors[e+1];return r=i?n.slice(o[1],i[1]).concat([this._createConstructor(e+1,t,n)]).concat(n.slice(i[2]+1,o[2]+1)):n.slice(o[1],o[2]+1),function(){return o[0].apply(t,r)}},e.prototype.create=function(e){var t=Object.create(this.provider.prototype),n=this._createConstructor(0,t,e),r=n();return s(r)||u(r)?r:t},e}(),p=function(){var e=function(e,t,n){this.provider=e,this.params=t,this.isPromise=n;for(var r,i=t[Symbol.iterator]();!(r=i.next()).done;){var a=r.value;if(a.token===o)throw new Error(""+c(e)+" is not a class. Only classes with a parent can ask for SuperConstructor!")}};return e.prototype.create=function(e){return this.provider.apply(void 0,e)},e}()},{"./annotations":2,"./util":7}],7:[function(e,t,n){"use strict";function r(e){return e.toUpperCase()===e}function o(e){return Object.keys(e.prototype).length>0?!0:e.name?r(e.name.charAt(0)):!1}function i(e){return"function"==typeof e}function a(e){return"object"==typeof e}function s(e){return"string"==typeof e?e:void 0===e||null===e?""+e:e.name?e.name:e.toString()}n.isUpperCase=r,n.isClass=o,n.isFunction=i,n.isObject=a,n.toString=s},{}],8:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var o=document.createElement("div"),i=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return i.observe(o,{attributes:!0}),function(e){r.length||o.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],9:[function(e){(function(e){!function(t,n){"use strict";function r(e){return v[l]=o.apply(n,e),l++}function o(e){var t=[].slice.call(arguments,1);return function(){"function"==typeof e?e.apply(n,t):new Function(""+e)()}}function i(e){if(m)setTimeout(o(i,e),0);else{var t=v[e];if(t){m=!0;try{t()}finally{a(e),m=!1}}}}function a(e){delete v[e]}function s(){d=function(){var t=r(arguments);return e.nextTick(o(i,t)),t}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function c(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&i(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),d=function(){var n=r(arguments);return t.postMessage(e+n,"*"),n}}function f(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;i(t)},d=function(){var t=r(arguments);return e.port2.postMessage(t),t}}function h(){var e=w.documentElement;d=function(){var t=r(arguments),n=w.createElement("script");return n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n),t}}function p(){d=function(){var e=r(arguments);return setTimeout(o(i,e),0),e}}if(!t.setImmediate){var d,l=1,v={},m=!1,w=t.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(t);g=g&&g.setTimeout?g:t,"[object process]"==={}.toString.call(t.process)?s():u()?c():t.MessageChannel?f():w&&"onreadystatechange"in w.createElement("script")?h():p(),g.setImmediate=d,g.clearImmediate=a}}(new Function("return this")())}).call(this,e("_process"))},{_process:8}],10:[function(e,t,n){"use strict";var r=e("c0"),o=chai.assert;n["default"]=function(){describe("c0()(args...)",function(){it("should not pass the thunk as an arguments",r(regeneratorRuntime.mark(function e(){var t=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.equal(t.length,0);case 1:case"end":return e.stop()}},e,this)}))),it("should not pass error for nil first argument",function(e){r(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o.equal(e,0);case 1:case"end":return t.stop()}},t,this)}))(0,e)})})}},{c0:1}],11:[function(e,t,n){"use strict";function r(e){return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t,this)}))}var o=e("c0"),i=chai.expect;n["default"]=function(){describe("c0(* -> yield [])",function(){it("should aggregate several thunks",function(e){o(regeneratorRuntime.mark(function t(){var e,n,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r("00"),n=r("01"),o=r("02"),t.next=5,[e,n,o];case 5:a=t.sent,i(a).to.have.length(3),i(a[0]).to.equal("00"),i(a[1]).to.equal("01"),i(a[2]).to.equal("02");case 10:case"end":return t.stop()}},t,this)}))(e)}),it("should noop with no args",function(e){o(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,[];case 2:e=t.sent,i(e).to.have.length(0);case 4:case"end":return t.stop()}},t,this)}))(e)})})}},{c0:1}],12:[function(e,t,n){"use strict";var r=regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,setImmediate;case 2:return e.abrupt("return","yay");case 3:case"end":return e.stop()}},s,this)}),o=e("c0"),i=chai.assert,a=chai.expect;n["default"]=function(){describe("c0(fn)",function(){describe("with a generator function",function(){it("should wrap with c0()",function(e){o(regeneratorRuntime.mark(function t(){var e,n,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r;case 2:return e=t.sent,t.next=5,r;case 5:return n=t.sent,t.next=8,r;case 8:return o=t.sent,i("yay"===e),i("yay"===n),i("yay"===o),t.next=14,[r,r,r];case 14:s=t.sent,a(s).to.deep.equal(["yay","yay","yay"]);case 16:case"end":return t.stop()}},t,this)}))(e)}),it("should catch errors",function(e){o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("boom");case 1:case"end":return e.stop()}},t,this)});case 2:case"end":return e.stop()}},t,this)}))(function(t){i(t),i("boom"===t.message),e()})})})})}},{c0:1}],13:[function(e,t,n){"use strict";var r=regeneratorRuntime.mark(function u(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.push("three"),t.next=3,setImmediate;case 3:e.push("four");case 4:case"end":return t.stop()}},u,this)}),o=regeneratorRuntime.mark(function c(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],e.push("one"),t.next=4,setImmediate;case 4:return e.push("two"),t.next=7,r(e);case 7:return e.push("five"),t.abrupt("return",e);case 9:case"end":return t.stop()}},c,this)}),i=e("c0"),a=chai.assert,s=chai.expect;n["default"]=function(){describe("c0(fn)",function(){describe("with a generator",function(){it("should wrap with c0()",function(e){i(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:return e=t.sent,s(e).to.deep.equal(["one","two","three","four","five"]),n=o(),r=o(),i=o(),t.next=9,[n,r,i];case 9:e=t.sent,s(e).to.deep.equal([["one","two","three","four","five"],["one","two","three","four","five"],["one","two","three","four","five"]]);case 11:case"end":return t.stop()}},t,this)}))(e)}),it("should catch errors",function(e){i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("boom");case 1:case"end":return e.stop()}},t,this)})();case 2:case"end":return e.stop()}},t,this)}))(function(t){a(t),a("boom"===t.message),e()})})})})}},{c0:1}],14:[function(e){"use strict";var t=e("./arguments")["default"],n=e("./arrays")["default"],r=e("./generator-functions")["default"],o=e("./generators")["default"],i=e("./objects")["default"],a=e("./promises")["default"],s=e("./receiver")["default"],u=e("./recursion")["default"],c=e("./thunks")["default"],f=e("./regression")["default"];describe("c0 generator utillity",function(){t(),n(),r(),o(),i(),a(),s(),u(),c(),f()})},{"./arguments":10,"./arrays":11,"./generator-functions":12,"./generators":13,"./objects":15,"./promises":16,"./receiver":17,"./recursion":18,"./regression":19,"./thunks":20}],15:[function(e,t,n){"use strict";function r(e){return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t,this)}))}function o(e){this.name=e,this.something=function(){}}var i=e("c0"),a=chai.expect;n["default"]=function(){describe("c0(* -> yield {})",function(){it("should aggregate several thunks",function(e){i(regeneratorRuntime.mark(function t(){var e,n,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r("00"),n=r("01"),o=r("02"),t.next=5,{a:e,b:n,c:o};case 5:i=t.sent,a(Object.keys(i)).to.have.length(3),a(i.a).to.equal("00"),a(i.b).to.equal("01"),a(i.c).to.equal("02");case 10:case"end":return t.stop()}},t,this)}))(e)}),it("should noop with no args",function(e){i(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,{};case 2:e=t.sent,a(Object.keys(e)).to.have.length(0);case 4:case"end":return t.stop()}},t,this)}))(e)}),it("should ignore non-thunkable properties",function(e){i(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={name:{first:"tobi"},age:2,address:r("00"),tobi:new o("tobi"),now:new Date},t.next=3,e;case 3:n=t.sent,a(n.name).to.deep.equal({first:"tobi"}),a(n.age).to.equal(2),a(n.tobi.name).to.equal("tobi"),a(n.now).to.deep.equal(e.now),a(n.address).to.include("00");case 9:case"end":return t.stop()}},t,this)}))(e)}),it("should preserve key order",function(e){function t(e){return function(t){setTimeout(t.bind(null,null,0),e)}}i(regeneratorRuntime.mark(function n(){var e,r,o,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e={sun:t(30),rain:t(20),moon:t(10)},n.next=3,e;case 3:r=n.sent,o=Object.keys(e).join(","),i=Object.keys(r).join(","),a(o).to.equal(i);case 7:case"end":return n.stop()}},n,this)}))(e)})})}},{c0:1}],16:[function(e,t,n){"use strict";function r(e,t){return new Promise(function(n,r){t?r(t):n(e)})}var o=e("c0"),i=chai.assert,a=chai.expect;n["default"]=function(){describe("c0(fn)",function(){describe("with one promise yield",function(){it("should work",function(e){o(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(1);case 2:e=t.sent,a(e).to.equal(1);case 4:case"end":return t.stop()}},t,this)}))(e)})}),describe("with several promise yields",function(){it("should work",function(e){o(regeneratorRuntime.mark(function t(){var e,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(1);case 2:return e=t.sent,t.next=5,r(2);case 5:return n=t.sent,t.next=8,r(3);case 8:o=t.sent,a([e,n,o]).to.deep.equal([1,2,3]);case 10:case"end":return t.stop()}},t,this)}))(e)})}),describe("when a promise is rejected",function(){it("should throw and resume",function(e){var t;o(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r(1,new Error("boom"));case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),t=n.t0;case 8:return i("boom"===t.message),n.next=11,r(1);case 11:e=n.sent,i(1===e);case 13:case"end":return n.stop()}},n,this,[[0,5]])}))(e)})})})}},{c0:1}],17:[function(e,t,n){"use strict";var r=e("c0"),o=chai.assert,i={foo:"bar"};n["default"]=function(){describe("c0(receiver).call(ctx)",function(){it("should set immediate gen receiver",function(e){r(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(i===e);case 1:case"end":return t.stop()}},t,this)})).call(i,e)}),it("should set delegate generator receiver",function(e){var t=regeneratorRuntime.mark(function a(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(i===e);case 1:case"end":return t.stop()}},a,this)}),n=regeneratorRuntime.mark(function s(){var e=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o(i===e),n.next=3,t;case 3:case"end":return n.stop()}},s,this)});r(regeneratorRuntime.mark(function u(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o(i===e),t.next=3,n;case 3:case"end":return t.stop()}},u,this)})).call(i,e)}),it("should set function receiver",function(e){function t(e){o(this===i),e()}r(regeneratorRuntime.mark(function n(){var e=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o(i===e),n.next=3,t;case 3:case"end":return n.stop()}},n,this)})).call(i,e)}),it("should set join delegate generator receiver",function(e){var t=regeneratorRuntime.mark(function s(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(i===e);case 1:case"end":return t.stop()}},s,this)}),n=regeneratorRuntime.mark(function u(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(i===e);case 1:case"end":return t.stop()}},u,this)}),a=regeneratorRuntime.mark(function c(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(i===e);case 1:case"end":return t.stop()}},c,this)});r(regeneratorRuntime.mark(function f(){var e=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o(i===e),r.next=3,[a,n,t];case 3:case"end":return r.stop()}},f,this)})).call(i,e)}),it("should set join function receiver",function(e){function t(e){o(i===this),e()}function n(e){o(i===this),e()}function a(e){o(i===this),e()}r(regeneratorRuntime.mark(function s(){var e=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o(i===e),r.next=3,[a,n,t];case 3:case"end":return r.stop()}},s,this)})).call(i,e)})}),describe("c0(receiver)(args...)",function(){it("should pass arguments to the receiver",function(e){r(regeneratorRuntime.mark(function t(e,n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(1===e),o(2===n),o(3===r);case 3:case"end":return t.stop()}},t,this)}))(1,2,3,e)}),it("should not pass the callback to the receiver",function(e){r(regeneratorRuntime.mark(function t(){var e=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(3===e.length);case 1:case"end":return t.stop()}},t,this)}))(1,2,3,e)}),it("should work when less arguments are passed than expected",function(e){r(regeneratorRuntime.mark(function t(e){var n=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(1===e),o(1===n.length);case 2:case"end":return t.stop()}},t,this)}))(1,e)}),it("should work without a callback",function(){r(regeneratorRuntime.mark(function e(t){var n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o(1===t),o(1===n.length);case 2:case"end":return e.stop()}},e,this)}))(1)})})}},{c0:1}],18:[function(e,t,n){"use strict";function r(e){return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t,this)}))}var o=e("c0"),i=chai.expect;n["default"]=function(){describe("c0() recursion",function(){it("should aggregate arrays within arrays",function(e){o(regeneratorRuntime.mark(function t(){var e,n,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r("00"),n=r("01"),o=r("02"),t.next=5,[e,[n,o]];case 5:a=t.sent,i(a).to.have.length(2),i(a[0]).to.equal("00"),i(a[1]).to.have.length(2),i(a[1][0]).to.equal("01"),i(a[1][1]).to.equal("02");case 11:case"end":return t.stop()}},t,this)}))(e)}),it("should aggregate objects within objects",function(e){o(regeneratorRuntime.mark(function t(){var e,n,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r("00"),n=r("01"),o=r("02"),t.next=5,{0:e,1:{0:n,1:o}};case 5:a=t.sent,i(a[0]).to.equal("00"),i(a[1][0]).to.equal("01"),i(a[1][1]).to.equal("02");case 9:case"end":return t.stop()}},t,this)}))(e)})})}},{c0:1}],19:[function(e,t,n){"use strict";var r=e("c0"),o=chai.expect;n["default"]=function(){describe("bugs",function(){it("#92",function(e){function t(t){return function(n){setImmediate(function(){try{t(n)}catch(r){o(r.message).to.equal("boom"),e()}})}}r(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){e(new Error("boom"))};case 2:case"end":return e.stop()}},n,this)}))(t(function(e){if(e)throw e}))})})}},{c0:1}],20:[function(e,t,n){"use strict";function r(e,t,n){return function(r){if(n)throw n;setImmediate(function(){r(t,e)})}}var o=e("c0"),i=chai.assert,a=chai.expect;n["default"]=function(){describe("c0(fn)",function(){describe("with no yields",function(){it("should work",function(e){o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,this)}))(e)})}),describe("with one yield",function(){it("should work",function(e){o(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(1);case 2:e=t.sent,a(e).to.equal(1);case 4:case"end":return t.stop()}},t,this)}))(e)})}),describe("with several yields",function(){it("should work",function(e){o(regeneratorRuntime.mark(function t(){var e,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(1);case 2:return e=t.sent,t.next=5,r(2);case 5:return n=t.sent,t.next=8,r(3);case 8:o=t.sent,a([e,n,o]).to.deep.equal([1,2,3]);case 10:case"end":return t.stop()}},t,this)}))(e)})}),describe("with many arguments",function(){it("should return an array",function(e){function t(){return function(e){e(null,"stdout","stderr")}}o(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t("something");case 2:e=n.sent,a(e).to.deep.equal(["stdout","stderr"]);case 4:case"end":return n.stop()}},n,this)}))(e)})}),describe("when the function throws",function(){it("should be caught",function(e){o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(1,null,new Error("boom"));case 3:e.next=8;break;case 5:e.prev=5,e.t1=e["catch"](0),a(e.t1.message).to.equal("boom");case 8:case"end":return e.stop()}},t,this,[[0,5]])}))(e)})}),describe("when an error is passed then thrown",function(){it("should only catch the first error only",function(e){o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){throw e(new Error("first")),new Error("second")};case 2:case"end":return e.stop()}},t,this)}))(function(t){a(t.message).to.equal("first"),e()})})}),describe("when an error is passed",function(){it("should throw and resume",function(e){var t;o(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r(1,new Error("boom"));case 3:n.next=8;break;case 5:n.prev=5,n.t2=n["catch"](0),t=n.t2;case 8:return i("boom"===t.message),n.next=11,r(1);case 11:e=n.sent,i(1===e);case 13:case"end":return n.stop()}},n,this,[[0,5]])}))(e)})}),describe("with nested c0()s",function(){it("should work",function(e){var t=[];o(regeneratorRuntime.mark(function n(){var e,i,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(1);case 2:return e=n.sent,n.next=5,r(2);case 5:return i=n.sent,n.next=8,r(3);case 8:return s=n.sent,t.push("one"),a([e,i,s]).to.deep.equal([1,2,3]),n.next=13,o(regeneratorRuntime.mark(function u(){var e,n,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.push("two"),s.next=3,r(1);case 3:return e=s.sent,s.next=6,r(2);case 6:return n=s.sent,s.next=9,r(3);case 9:return i=s.sent,a([e,n,i]).to.deep.equal([1,2,3]),s.next=13,o(regeneratorRuntime.mark(function u(){var e,n,o;
return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.push("three"),i.next=3,r(1);case 3:return e=i.sent,i.next=6,r(2);case 6:return n=i.sent,i.next=9,r(3);case 9:o=i.sent,a([e,n,o]).to.deep.equal([1,2,3]);case 11:case"end":return i.stop()}},u,this)}));case 13:case"end":return s.stop()}},u,this)}));case 13:return n.next=15,o(regeneratorRuntime.mark(function c(){var e,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.push("four"),i.next=3,r(1);case 3:return e=i.sent,i.next=6,r(2);case 6:return n=i.sent,i.next=9,r(3);case 9:o=i.sent,a([e,n,o]).to.deep.equal([1,2,3]);case 11:case"end":return i.stop()}},c,this)}));case 15:a(t).to.deep.equal(["one","two","three","four"]);case 16:case"end":return n.stop()}},n,this)}))(e)})}),describe("return values",function(){describe("with a callback",function(){it("should be passed",function(e){var t=o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(1);case 2:return e.t3=e.sent,e.next=5,r(2);case 5:return e.t4=e.sent,e.next=8,r(3);case 8:return e.t5=e.sent,e.abrupt("return",[e.t3,e.t4,e.t5]);case 10:case"end":return e.stop()}},n,this)}));t(function(t,n){return t?e(t):(a(n).to.deep.equal([1,2,3]),void e())})})}),describe("when nested",function(){it("should return the value",function(e){var t=o(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(4);case 2:return e.t6=e.sent,e.next=5,r(5);case 5:return e.t7=e.sent,e.next=8,r(6);case 8:return e.t8=e.sent,e.abrupt("return",[e.t6,e.t7,e.t8]);case 10:case"end":return e.stop()}},n,this)}));case 2:return e=t.sent,t.next=5,r(1);case 5:return t.t9=t.sent,t.next=8,r(2);case 8:return t.t10=t.sent,t.next=11,r(3);case 11:return t.t11=t.sent,t.abrupt("return",[t.t9,t.t10,t.t11].concat(e));case 13:case"end":return t.stop()}},n,this)}));t(function(t,n){return t?e(t):(a(n).to.deep.equal([1,2,3,4,5,6]),void e())})})})}),describe("when yielding neither a function nor a promise",function(){it("should throw",function(e){var t=[];o(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,"something";case 3:n.next=8;break;case 5:n.prev=5,n.t12=n["catch"](0),t.push(n.t12.message);case 8:return n.prev=8,n.next=11,"something";case 11:n.next=16;break;case 13:n.prev=13,n.t13=n["catch"](8),t.push(n.t13.message);case 16:a(t).to.have.length(2),e="yield a function, promise, generator, array, or object",a(!!t[0].match(e)).to.equal(!0),a(!!t[1].match(e)).to.equal(!0);case 20:case"end":return n.stop()}},n,this,[[0,5],[8,13]])}))(e)})}),describe("with errors",function(){it("should throw",function(e){var t=[];o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(1,new Error("foo"));case 3:e.next=8;break;case 5:e.prev=5,e.t14=e["catch"](0),t.push(e.t14.message);case 8:return e.prev=8,e.next=11,r(1,new Error("bar"));case 11:e.next=16;break;case 13:e.prev=13,e.t15=e["catch"](8),t.push(e.t15.message);case 16:a(t).to.deep.equal(["foo","bar"]);case 17:case"end":return e.stop()}},n,this,[[0,5],[8,13]])}))(e)}),it("should catch errors on .send()",function(e){var t=[];o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(1,null,new Error("foo"));case 3:e.next=8;break;case 5:e.prev=5,e.t16=e["catch"](0),t.push(e.t16.message);case 8:return e.prev=8,e.next=11,r(1,null,new Error("bar"));case 11:e.next=16;break;case 13:e.prev=13,e.t17=e["catch"](8),t.push(e.t17.message);case 16:a(t).to.deep.equal(["foo","bar"]);case 17:case"end":return e.stop()}},n,this,[[0,5],[8,13]])}))(e)}),it("should pass future errors to the callback",function(e){o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(1);case 2:return e.next=4,r(2,null,new Error("fail"));case 4:return i(!1),e.next=7,r(3);case 7:case"end":return e.stop()}},t,this)}))(function(t){a(t.message).to.equal("fail"),e()})}),it("should pass immediate errors to the callback",function(e){o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(1);case 2:return e.next=4,r(2,new Error("fail"));case 4:return i(!1),e.next=7,r(3);case 7:case"end":return e.stop()}},t,this)}))(function(t){a(t.message).to.equal("fail"),e()})}),it("should catch errors on the first invocation",function(e){o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("fail");case 1:case"end":return e.stop()}},t,this)}))(function(t){a(t.message).to.equal("fail"),e()})}),it("should rethrow on a synchronous thunk",function(e){o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){e(new Error("boom"))};case 2:case"end":return e.stop()}},t,this)}))(function(t){a(t.message).to.equal("boom"),e()})})})})}},{c0:1}],21:[function(e,t,n){"use strict";var r=chai.expect,o=e("di").annotate,i=e("di").hasAnnotation,a=e("di").readAnnotations,s=e("di").Inject,u=e("di").InjectLazy,c=e("di").InjectPromise,f=e("di").Provide,h=e("di").ProvidePromise;n["default"]=function(){describe("hasAnnotation",function(){it("should return false if fn not annotated",function(){function e(){}var t=function(){},n=function(){};r(i(e,n)).to.equal(!1),r(i(t,n)).to.equal(!1)}),it("should return true if the fn has an instance of given annotation",function(){function e(){}var t=function(){};o(e,new t),r(i(e,t)).to.equal(!0)}),it("should return false if fn does not have given annotation",function(){function e(){}var t=function(){},n=function(){};o(e,new t),r(i(e,n)).to.equal(!1)})}),describe("readAnnotations",function(){it("should read @Provide",function(){var e=function(){},t=function(){};o(t,new f(e));var n=a(t);r(n.provide.token).to.equal(e),r(n.provide.isPromise).to.equal(!1)}),it("should read @ProvidePromise",function(){var e=function(){},t=function(){};o(t,new h(e));var n=a(t);r(n.provide.token).to.equal(e),r(n.provide.isPromise).to.equal(!0)}),it("should read @Inject",function(){var e=function(){},t=function(){},n=function(){};o(n,new s(e,t));var i=a(n);r(i.params[0].token).to.equal(e),r(i.params[0].isPromise).to.equal(!1),r(i.params[0].isLazy).to.equal(!1),r(i.params[1].token).to.equal(t),r(i.params[1].isPromise).to.equal(!1),r(i.params[1].isLazy).to.equal(!1)}),it("should read @InjectLazy",function(){var e=function(){},t=function(){};o(t,new u(e));var n=a(t);r(n.params[0].token).to.equal(e),r(n.params[0].isPromise).to.equal(!1),r(n.params[0].isLazy).to.equal(!0)}),it("should read @InjectPromise",function(){var e=function(){},t=function(){};o(t,new c(e));var n=a(t);r(n.params[0].token).to.equal(e),r(n.params[0].isPromise).to.equal(!0),r(n.params[0].isLazy).to.equal(!1)}),it("should read stacked @Inject{Lazy, Promise} annotations",function(){var e=function(){},t=function(){},n=function(){},i=function(){};o(i,new s(e)),o(i,new u(t)),o(i,new c(n));var f=a(i);r(f.params[0].token).to.equal(e),r(f.params[0].isPromise).to.equal(!1),r(f.params[0].isLazy).to.equal(!1),r(f.params[1].token).to.equal(t),r(f.params[1].isPromise).to.equal(!1),r(f.params[1].isLazy).to.equal(!0),r(f.params[2].token).to.equal(n),r(f.params[2].isPromise).to.equal(!0),r(f.params[2].isLazy).to.equal(!1)})})}},{di:3}],22:[function(e,t,n){"use strict";function r(){return Promise.resolve(new p)}var o=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e.__proto__=t},i=e("di").annotate,a=e("di").Injector,s=e("di").Inject,u=e("di").InjectPromise,c=e("di").ProvidePromise,f=e("di").TransientScope,h=chai.expect,p=function(){};i(r,new c(p));var d=function(){},l=function(e){this.list=e};i(l,new s(p));var v=function(e){this.promise=e};i(v,new u(p)),n["default"]=function(){describe("async",function(){it("should return a promise",function(){var e=new a([r]),t=e.getPromise(p);h(t).to.be["instanceof"](Promise)}),it("should throw when instantiating promise provider synchronously",function(){var e=new a([r]);h(function(){return e.get(p)}).to["throw"](/Cannot instantiate .* synchronously\. It is provided as a promise!/)}),it("should return promise even if the provider is sync",function(){var e=new a,t=e.getPromise(d);h(t).to.be["instanceof"](Promise)}),it("should return promise even if the provider is sync, from cache",function(){var e=new a,t=e.getPromise(d),t=e.getPromise(d);h(t).to.be["instanceof"](Promise)}),it("should return promise when a dependency is async",function(e){var t=new a([r]);t.getPromise(l).then(function(t){h(t).to.be["instanceof"](l),h(t.list).to.be["instanceof"](p),e()})["catch"](function(e){console.log(e)})}),it("should return a promise even from parent injector",function(){var e=new a([d]),t=e.createChild([]);h(t.getPromise(d)).to.be["instanceof"](Promise)}),it("should throw when a dependency is async",function(){var e=new a([r]);h(function(){return e.get(l)}).to["throw"](/Cannot instantiate .* synchronously\. It is provided as a promise! (.* -> .*)/)}),it("should resolve synchronously when async dependency requested as a promise",function(){var e=new a([r]),t=e.get(v);h(t).to.be["instanceof"](v),h(t.promise).to.be["instanceof"](Promise)}),it("should not cache TransientScope",function(e){var t=function(e){this.list=e};i(t,new f),i(t,new s(p));var n=new a([r]);n.getPromise(t).then(function(r){n.getPromise(t).then(function(t){h(r).not.to.equal(t),e()})})}),it("should allow async dependency in a parent constructor",function(e){var t=function(e){var t=function(){e.apply(this,arguments)};return o(t,e),t}(l),n=new a([r]);n.getPromise(t).then(function(n){h(n).to.be["instanceof"](t),h(n.list).to.be["instanceof"](p),e()})})})}},{di:3}],23:[function(e,t,n){"use strict";function r(){return"strong engine"}n.createEngine=r;var o=e("di").annotate,i=e("di").Inject,a=e("di").Provide,s=function(){};n.Engine=s;var u=function(){var e=function(e){this.engine=e};return e.prototype.start=function(){},e}();n.Car=u;var c=function(){};n.CyclicEngine=c,o(u,new i(s)),o(r,new a(s)),o(c,new i(u)),o(c,new a(s))},{di:3}],24:[function(e,t,n){"use strict";var r=e("di").annotate,o=e("di").Inject,i=e("di").Provide,a=function(){var e=function(){};return e.prototype.nothing=function(){},e}();n.House=a,r(a,new i("House")),r(a,new o("Kitchen"));var s=function(){var e=function(){};return e.prototype.nothing=function(){},e}();n.Kitchen=s,r(s,new i("Kitchen")),r(s,new o("Sink"));n.house=[a,s]},{di:3}],25:[function(e,t,n){"use strict";var r=e("di").annotate,o=e("di").Inject,i=e("di").Provide,a=function(){var e=function(){};return e.prototype.nothing=function(){},e}();n.ShinyHouse=a,r(a,new i("House")),r(a,new o("Kitchen"));n.house=[a]},{di:3}],26:[function(e){"use strict";var t=e("./annotations")["default"],n=e("./async")["default"],r=e("./injector")["default"];describe("di Framework",function(){t(),n(),r()})},{"./annotations":21,"./async":22,"./injector":27}],27:[function(e,t,n){"use strict";var r=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e.__proto__=t},o=e("di").annotate,i=e("di").Injector,a=e("di").Inject,s=e("di").InjectLazy,u=e("di").Provide,c=e("di").SuperConstructor,f=e("di").TransientScope,h=e("./fixtures/car").Car,p=e("./fixtures/car").CyclicEngine,d=e("./fixtures/house").house,l=e("./fixtures/shiny_house").house,v=chai.expect;n["default"]=function(){describe("injector",function(){it("should instantiate a class without dependencies",function(){var e=function(){var e=function(){};return e.prototype.start=function(){},e}(),t=new i,n=t.get(e);v(n).to.be["instanceof"](e)}),it("should resolve dependencies based on @Inject annotation",function(){var e=function(){var e=function(){};return e.prototype.start=function(){},e}(),t=function(){var e=function(e){this.engine=e};return e.prototype.start=function(){},e}();o(t,new a(e));var n=new i,r=n.get(t);v(r).to.be["instanceof"](t),v(r.engine).to.be["instanceof"](e)}),it("should override providers",function(){var e=function(){},t=function(){var e=function(e){this.engine=e};return e.prototype.start=function(){},e}();o(t,new a(e));var n=function(){var e=function(){};return e.prototype.start=function(){},e}();o(n,new u(e));var r=new i([n]),s=r.get(t);v(s).to.be["instanceof"](t),v(s.engine).to.be["instanceof"](n)}),it("should allow factory function",function(){function e(){return 0}var t=function(){};o(e,new u(t));var n=new i([e]),r=n.get(t);v(r).to.equal(0)}),it("should cache instances",function(){var e=function(){},t=new i,n=t.get(e);v(t.get(e)).to.equal(n)}),it("should throw when no provider defined",function(){var e=new i;v(function(){return e.get("NonExisting")}).to["throw"]("No provider for NonExisting!")}),it("should show the full path when no provider defined",function(){var e=new i(d);v(function(){return e.get("House")}).to["throw"]("No provider for Sink! (House -> Kitchen -> Sink)")}),it("should throw when trying to instantiate a cyclic dependency",function(){var e=new i([p]);v(function(){return e.get(h)}).to["throw"](/Cannot instantiate cyclic dependency! (.* -> .* -> .*)/)}),it("should show the full path when error happens in a constructor",function(){var e=function(){throw new Error("This engine is broken!")},t=function(){};o(t,new a(e));var n=new i;v(function(){return n.get(t)}).to["throw"](/Error during instantiation of .*! \(.* -> .*\)/)}),it("should throw an error when used in a class without any parent",function(){var e=function(){};o(e,new a(c));var t=new i;v(function(){t.get(e)}).to["throw"](/Only classes with a parent can ask for SuperConstructor!/)}),it("should throw an error when null/undefined token requested",function(){var e=new i;v(function(){e.get(null)}).to["throw"](/Invalid token "null" requested!/),v(function(){e.get(void 0)}).to["throw"](/Invalid token "undefined" requested!/)}),it("should show the full path when null/undefined token requested",function(){var e=function(){};o(e,new a(void 0));var t=function(){};o(t,new a(null));var n=new i;v(function(){n.get(e)}).to["throw"](/Invalid token "undefined" requested! \(.* -> undefined\)/),v(function(){n.get(t)}).to["throw"](/Invalid token "null" requested! \(.* -> null\)/)}),it("should provide itself",function(){var e=new i;v(e.get(i)).to.equal(e)}),describe("SuperConstructor",function(){it('should support "super" to call a parent constructor',function(){var e=function(){},t=function(e){this.parentSomething=e};o(t,new a(e));var n=function(e){var t=function(e,t){e(),this.childSomething=t};return r(t,e),t}(t);o(n,new a(c,e));var s=new i,u=s.get(n);v(u.parentSomething).to.be["instanceof"](e),v(u.childSomething).to.be["instanceof"](e),v(u.childSomething).to.equal(u.parentSomething)}),it('should support "super" to call multiple parent constructors',function(){var e=function(){},t=function(){},n=function(e){this.parentFoo=e};o(n,new a(e));var s=function(e){var t=function(e,t){e(),this.childFoo=t};return r(t,e),t}(n);o(s,new a(c,e));var u=function(e){var t=function(e,t,n){e(),this.grandChildBar=n,this.grandChildFoo=t};return r(t,e),t}(s);o(u,new a(c,e,t));var f=new i,h=f.get(u);v(h.parentFoo).to.be["instanceof"](e),v(h.childFoo).to.be["instanceof"](e),v(h.grandChildFoo).to.be["instanceof"](e),v(h.grandChildBar).to.be["instanceof"](t)}),it("should throw an error when used in a factory function",function(){function e(){}var t=function(){};o(e,new u(t)),o(e,new a(c)),v(function(){var n=new i([e]);n.get(t)}).to["throw"](/Only classes with a parent can ask for SuperConstructor!/)})}),describe("transient",function(){it("should never cache",function(){var e=function(){};o(e,new f);var t=new i;v(t.get(e)).not.to.equal(t.get(e))}),it("should always use dependencies (default providers) from the youngest injector",function(){var e=function(){};o(e,new a);var t=function(e){this.foo=e};o(t,new f),o(t,new a(e));var n=new i,r=n.createChild([e]),s=r.get(e),u=n.get(e),c=r.get(t),h=r.get(t),p=n.get(t);v(c.foo).to.equal(s),v(h.foo).to.equal(s),v(p.foo).to.equal(u)}),it("should always use dependencies from the youngest injector",function(){var e=function(){};o(e,new a);var t=function(e){this.foo=e};o(t,new f),o(t,new a(e));var n=new i([t]),r=n.createChild([e]),s=r.get(e),u=n.get(e),c=r.get(t),h=r.get(t),p=n.get(t);v(c.foo).to.equal(s),v(h.foo).to.equal(s),v(p.foo).to.equal(u)})}),describe("child",function(){it("should load instances from parent injector",function(){var e=function(){var e=function(){};return e.prototype.start=function(){},e}(),t=new i([e]),n=t.createChild([]),r=t.get(e),o=n.get(e);v(o).to.equal(r)}),it("should create new instance in a child injector",function(){var e=function(){var e=function(){};return e.prototype.start=function(){},e}(),t=function(){var e=function(){};return e.prototype.start=function(){},e}();o(t,new u(e));var n=new i([e]),r=n.createChild([t]),a=n.get(e),s=r.get(e);v(a).not.to.equal(s),v(s).to.be["instanceof"](t)}),it("should force new instances by annotation",function(){var e=function(){},t=function(){var e=function(){};return e.prototype.start=function(){},e}(),n=function(){var e=function(e){this.engine=e};return e.prototype.start=function(){},e}();o(n,new e),o(n,new a(t));var r=new i([n,t]),s=r.createChild([],[e]),u=r.get(n),c=s.get(n);v(c).not.to.equal(u),v(c.engine).to.equal(u.engine)}),it("should force new instances by annotation using overridden provider",function(){var e=function(){},t=function(){var e=function(){};return e.prototype.start=function(){},e}(),n=function(){var e=function(){};return e.prototype.start=function(){},e}();o(n,new e),o(n,new u(t));var r=new i([n]),a=r.createChild([],[e]),s=r.createChild([],[e]),c=a.get(t),f=s.get(t);v(c).not.to.equal(f),v(c).to.be["instanceof"](n),v(f).to.be["instanceof"](n)}),it("should force new instance by annotation using the lowest overridden provider",function(){var e=function(){},t=function(){var e=function(){};return e.prototype.start=function(){},e}();o(t,new e);var n=function(){var e=function(){};return e.prototype.start=function(){},e}();o(n,new u(t)),o(n,new e);var r=function(){var e=function(){};return e.prototype.start=function(){},e}();o(r,new u(t)),o(r,new e);var a=new i([t]),s=a.createChild([n]),c=s.createChild([],[e]),f=a.get(t),h=s.get(t),p=c.get(t);v(f).to.be["instanceof"](t),v(h).to.be["instanceof"](n),v(p).to.be["instanceof"](n),v(p).not.to.equal(h)}),it("should show the full path when no provider",function(){var e=new i(d),t=e.createChild(l);v(function(){return t.get("House")}).to["throw"]("No provider for Sink! (House -> Kitchen -> Sink)")}),it("should provide itself",function(){var e=new i,t=e.createChild([]);v(t.get(i)).to.equal(t)}),it("should cache default provider in parent injector",function(){var e=function(){};o(e,new a);var t=new i,n=t.createChild([]),r=n.get(e),s=t.get(e);v(s).to.equal(r)}),it("should force new instance by annotation for default provider",function(){var e=function(){},t=function(){};o(t,new a),o(t,new e);var n=new i,r=n.createChild([],[e]),s=r.get(t),u=n.get(t);v(u).not.to.equal(s)})}),describe("lazy",function(){it("should instantiate lazily",function(){var e=sinon.spy(),t=function(){e()},n=function(){var e=function(e){this.engine=null,this.createEngine=e};return e.prototype.start=function(){this.engine=this.createEngine()},e}();o(n,new s(t));var r=new i,a=r.get(n);v(e).not.to.have.been.called,a.start(),v(e).to.have.been.called,v(a.engine).to.be["instanceof"](t)}),it("should instantiate lazily from a parent injector",function(){var e=sinon.spy(),t=function(){e()},n=function(){var e=function(e){this.engine=null,this.createEngine=e};return e.prototype.start=function(){this.engine=this.createEngine()},e}();o(n,new s(t));var r=new i([t]),a=r.createChild([n]),u=a.get(n);v(e).not.to.have.been.called,u.start(),v(e).to.have.been.called,v(u.engine).to.be["instanceof"](t)}),describe("with locals",function(){it("should always create a new instance",function(){var e=sinon.spy(),t=function(t){e(),this.power=t};o(t,new f),o(t,new a("power"));var n=function(e){this.createEngine=e};o(n,new s(t));var r=new i,u=r.get(n),c=u.createEngine("power",1184),h=u.createEngine("power",420);v(c).not.to.equal(h),v(c.power).to.equal(1184),v(h.power).to.equal(420);var p=u.createEngine("power",420);v(h).not.to.equal(p)})})})})}},{"./fixtures/car":23,"./fixtures/house":24,"./fixtures/shiny_house":25,di:3}],28:[function(e){"use strict";e("setimmediate"),console.log('\nThe MIT License (MIT)\n\nCopyright (c) 2014, markuz-brasil\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n'),mocha.setup("bdd"),mocha.reporter("html"),e("./di"),e("./c0"),mocha.run()},{"./c0":14,"./di":26,setimmediate:9}]},{},[28]);